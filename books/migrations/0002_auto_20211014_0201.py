# Generated by Django 3.2.8 on 2021-10-14 12:01

from django.db import migrations
from random import randint
import datetime
def populate_authors(apps, schema_editor):
    '''
    We can't import the Post model directly as it may be a newer
    version than this migration expects. We use the historical version.
    '''
    Author = apps.get_model('books', 'Author')
    Publisher = apps.get_model('books', 'Publisher')
    Book = apps.get_model('books', 'Book')
    for i in range(50):
        # create author 
        a =Author.objects.create(name="author"+str(randint(100,234)),age=randint(20,102))
        p = Publisher.objects.create(name="publisher"+str(randint(100,234)))
        book = Book.objects.create(name="Book"+str(randint(100,10000)),rating =randint(0,100) ,pages=randint(100,500),price=randint(50,200),
                pubdate=datetime.date.today(),publisher=p)
        book.authors.add(a)





class Migration(migrations.Migration):

    dependencies = [
        ('books', '0001_initial'),
    ]

    operations = [  migrations.RunPython(populate_authors),
    ]
